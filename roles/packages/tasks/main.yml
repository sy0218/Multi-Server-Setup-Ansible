# -----------------------------------------------------
# Install Packages
# -----------------------------------------------------
# 기본 유틸리티 패키지 설치
- name: "Install base packages"
  apt:
    name: "{{ install_packages }}"
    state: present
    update_cache: yes

# -----------------------------------------------------
# Root Password 설정 검증
# -----------------------------------------------------
# 패키지 설치 검증
- name: "Check installed packages"
  shell: dpkg -l | grep -E "{{ install_packages | replace(',', '|') }}"
  register: packages_check
  changed_when: false

- name: "Assert packages installed"
  assert:
    that:
      - packages_check.rc == 0
    success_msg: "Good!.. | Packages installed successfully"
    fail_msg: "ERROR!.. | Some packages are missing"
